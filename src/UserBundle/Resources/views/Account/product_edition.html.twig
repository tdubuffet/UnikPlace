{% extends 'UserBundle::base.html.twig' %}

{% block title %}Edition du produit {{ product.name }}{% endblock %}

{% block description %}{% endblock %}


{% block javascript_include %}{{ jsinit(['ProductEdition']) }}{% endblock javascript_include %}

{% block account_content %}


  {% for flashMessage in app.session.flashbag.get('copy') %}
  <div class="alert alert-info">{{ flashMessage }}</div>
  {% endfor %}


  {{ form_start(productForm) }}

  <div class="box">
    <!-- /.box-header -->
    <div class="box-body">

      {% if app.request.get('copy') %}
      <div class="alert alert-info">
        Vous êtes sur le point de créer un nouveau produit à partir de votre produit <i>{{ product.name }}</i>.<br />
      </div>
      {% endif %}

      <h3>Informations</h3>
      {{ form_row(productForm.name) }}
      {{ form_row(productForm.description, { 'attr': { 'rows': 6}}) }}

      <h3>Prix</h3>
      <div class="row">
        <div class="col-md-3">
          {{ form_row(productForm.price) }}
        </div>

        <div class="col-md-3">
          {{ form_row(productForm.originalPrice) }}
        </div>

        <div class="col-md-3">
          {{ form_row(productForm.allowOffer) }}
        </div>
      </div>

      <h3>Poids et dimensions du produit</h3>
      <div class="row">
        <div class="col-md-3">
          {{ form_row(productForm.weight) }}
        </div>
        <div class="col-md-3">
          {{ form_row(productForm.width) }}
        </div>

        <div class="col-md-3">
          {{ form_row(productForm.length) }}
        </div>

        <div class="col-md-3">
          {{ form_row(productForm.height) }}
        </div>
      </div>

      <h3>Livraison</h3>
      <div class="row">
        <div class="col-md-4">
          {{ form_row(productForm.customDeliveryFee) }}
        </div>
      </div>
      <div class="row">
	<div class="col-md-6">
          {{ form_row(productForm.byHandDelivery) }}
	</div>
      </div>

      <h3>Compléments</h3>
      <div class="row">
        <div class="col-md-12">

          {% for customField in customFields %}
            {{ customField|raw }}
          {% endfor %}

        </div>
      </div>

      <div style="display: none">
      {{ form_rest(productForm) }}
      </div>

      <h3>Images</h3>
      <input type="file" id="fileupload" multiple style="display:none;">

      <div class="row box-upload-pictures">
        {% for i in 0..4 %}
        <div class="col-sm-4">
          <div class="upload-pic other-photo">
            <div class="upload-pic-input" {% if product.images[i] is defined %}style="display: none"{% endif %}>
            </div>
            <div class="upload-pic-preview" {% if product.images[i] is defined %}style="display: block"{% endif %}>
              <div class="progress">
                <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="0" role="progressbar" class="progress-bar progress-bar-striped active"></div>
              </div>
              <span title="Retirer la photo" class="upload-pic-delete"><i class="fa fa-times"></i></span>
              {% if product.images[i] is defined %}
              <img class="upload-pic-img" src="{{ loadpic(product.images[i], 250, 250, 'r3') }}" />
              {% endif %}
            </div>
            <input type="hidden" value="{% if product.images[i] is defined %}{{ product.images[i].id }}{% endif %}" name="image{{ i }}" id="image{{ i }}" class="upload-pic-id">
          </div>
        </div>
        {% endfor %}
      </div>

    </div>
    <div class="box-footer" style="margin-top: 20px;">
      <button class="btn btn-primary" type="submit">
        Enregistrer
      </button>
    </div>
  </div>
  {{ form_end(productForm) }}

{% endblock %}



