{% extends "UserBundle::base.html.twig" %}

{% block title %}Mon portefeuille{% endblock %}
{% block description %}Mon portefeuille sur Noname{% endblock %}


{% block account_content %}

  <h2>Mon argent</h2>


  <div class="row">

    <div class="col-md-4 col-md-offset-4">

      <div class="box text-center text-center wallet-amount">
        {{ (wallet.Balance.Amount/100)|number_format(2, ',', ' ') }} {{ wallet.Balance.Currency }}
      </div>

      <button class="btn btn-primary btn-block">
        Retrait de mon argent
      </button>

      <button class="btn btn-outline btn-block">
        Gérer mon RIB
      </button>

    </div>

  </div>



  <h2>Historique de vos transactions</h2>

  <div class="table-responsive">
    <table style="" class="classifieds-table table table-hover">
      <thead>
      <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Montant de la vente</th>
        <th>Montant crédité</th>
        <th>Statut</th>
      </tr>
      </thead>
      <tbody>
      {% for transaction in transactions %}
        <tr>

          <td>{{ transaction.CreationDate|date('d/m/Y à H:i') }}</td>
          <td>{% if (transaction.Type == 'TRANSFER' or transaction.Type == 'PAYIN') %}Crédit{% else %}Débit{% endif %}</td>
          <td>
            {% if (transaction.Type == 'TRANSFER' or transaction.Type == 'PAYIN') %}
              + {{ (transaction.DebitedFunds.Amount/100)|number_format(2, ',', ' ') }} € ( dont {{ (transaction.Fees.Amount/100)|number_format(2, ',', ' ') }} € de commission)
            {% else %}
              - {{ (transaction.CreditedFunds.Amount/100)|number_format(2, ',', ' ') }} €
            {% endif %}
          </td>
          <td>{{ (transaction.CreditedFunds.Amount/100)|number_format(2, ',', ' ') }} €</td>
          <td>
            {% if transaction.Status == "FAILED" %}
              <span class="label label-danger">Annulé/Echoué</span>
            {% elseif transaction.Status == "CREATED" %}
              <span class="label label-primary">En traitement</span>
            {% elseif transaction.Status == "SUCCEEDED" %}
              <span class="label label-success">Validé</span>
            {% else %}
              {{ transaction.Status }}
            {% endif %}
          </td>
        </tr>
      {% else %}
        <tr><td colspan="5" class="text-center">Aucune transaction</td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

{% endblock %}