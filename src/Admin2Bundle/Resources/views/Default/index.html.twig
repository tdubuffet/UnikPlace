{% extends 'Admin2Bundle::layout.html.twig' %}

{% block page_title %}Admin version 2{% endblock %}


{% block page_content %}

  <hr />


  <div class="row">
    <div class="col-md-4">

      <div class="info-box">
        <span class="info-box-icon bg-info"><i class="fa fa-shopping-cart"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Commandes</span>
          <span class="info-box-number">{{ totalOrders }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>

      <div class="info-box">
        <span class="info-box-icon bg-orange"><i class="fa fa-shopping-cart"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Commandes en attentes</span>
          <span class="info-box-number">{{ totalOrdersAwaiting }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>

      <div class="info-box">
        <span class="info-box-icon bg-green"><i class="fa fa-shopping-cart"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Commandes acceptées</span>
          <span class="info-box-number">{{ totalOrdersAccepted }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>


      <div class="info-box">
        <span class="info-box-icon bg-red"><i class="fa fa-shopping-cart"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Commandes refusées</span>
          <span class="info-box-number">{{ totalOrdersRefused }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>

    </div>


    <div class="col-md-4">

      <div class="info-box">
        <span class="info-box-icon bg-info"><i class="fa fa-cube"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Produits</span>
          <span class="info-box-number">{{ totalProducts }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>

      <div class="info-box">
        <span class="info-box-icon bg-orange"><i class="fa fa-cube"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Produits en attente de modération</span>
          <span class="info-box-number">{{ totalProductsAwaiting }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>

      <div class="info-box">
        <span class="info-box-icon bg-green"><i class="fa fa-cube"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Produits publiés</span>
          <span class="info-box-number">{{ totalProductsAccepted }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>

      <div class="info-box">
        <span class="info-box-icon bg-red"><i class="fa fa-cube"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Produits refusés</span>
          <span class="info-box-number">{{ totalProductsRefused }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>

    </div>

    <div class="col-md-4">
      <div class="info-box">
        <span class="info-box-icon bg-info"><i class="fa fa-user"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Utilisateurs</span>
          <span class="info-box-number">{{ totalUsers }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>


      <div class="info-box">
        <span class="info-box-icon bg-orange"><i class="fa fa-user"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Utilisateurs AFK</span>
          <span class="info-box-number">{{ totalUsersAfk }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>

      <div class="info-box">
        <span class="info-box-icon bg-green"><i class="fa fa-user"></i></span>

        <div class="info-box-content">
          <span class="info-box-text">Utilisateurs actif</span>
          <span class="info-box-number">{{ totalUsersActive }}</span>
        </div>
        <!-- /.info-box-content -->
      </div>

    </div>

  </div>







  <hr />

  <div class="row">
    <div class="col-md-12">
    <div class="box box-info">
      <div class="box-header with-border">
        <h3 class="box-title">Les dernières commandes</h3>

        <div class="box-tools pull-right">
          <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
          </button>
          <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
        </div>
      </div>
      <!-- /.box-header -->
      <div class="box-body">
        <div class="table-responsive">
          <table class="table no-margin">
            <thead>
            <tr>
              <th>ID</th>
              <th>Produit</th>
              <th>Montant total</th>
              <th>Prix du produit</th>
              <th>Frais de port</th>
              <th>Livraison</th>
              <th>Statut</th>
              <th>Date de création</th>
              <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for order in orders %}
              {% set code = order.product.currency.code %}
              <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.product.name }}</td>
                <td>{{ order.amount|currency_convert_format(code) }}</td>
                <td>{{ order.productAmount|currency_convert_format(code) }}</td>
                <td>{{ order.deliveryAmount|currency_convert_format(code) }}</td>
                <td>{{ order.delivery.deliveryMode.name }}</td>
                <td>{{ order.status.name }}</td>
                <td>{{ order.createdAt|date() }}</td>
                <td><b><a class="action-show" href="{{ path('ad2_orders_view', {'id' : order.id}) }}">Voir</a></b></td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
        <!-- /.table-responsive -->
      </div>
      <!-- /.box-body -->
      <div class="box-footer clearfix">
        <a href="{{ path('ad2_orders_list') }}" class="btn btn-sm btn-default btn-flat pull-right">Liste des commandes</a>
      </div>
      <!-- /.box-footer -->
    </div>
    </div>
  </div>



{% endblock %}