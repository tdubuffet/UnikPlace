{% extends 'AppBundle::base.html.twig' %}

{% block title %}Choix du prix{% endblock %}
{% block description %}Dépôt d'annonce - Prix{% endblock %}

{% block javascript_include %}{{ jsinit(['deposit']) }}{% endblock javascript_include %}

{% block body %}
<div class="main-wrapper">
  <div class="container">
    <div class="main deposit">

      <div class="deposit-steps row">
        <div class="col-sm-3">
          <div class="deposit-step">Photos</div>
        </div>
        <div class="col-sm-3">
          <div class="deposit-step">Description</div>
        </div>
        <div class="col-sm-3">
          <div class="deposit-step active">Prix</div>
        </div>
        <div class="col-sm-3">
          <div class="deposit-step">Livraison</div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-8 col-center-block">
          {% for flash_message in app.session.flashBag.get('error') %}
            {% for error in flash_message %}
              <div class="alert alert-danger">
                {{ error }}
              </div>
            {% endfor %}
          {% endfor %}

          <form method="post" action="{{ path('deposit_postprice') }}" id="price-form">
            <div class="row">
              <div class="col-sm-6">
                <div class="form-group">
                  <label class="required">Prix de vente</label>
                  <input type="number" name="price" id="product-price" class="form-control" min="1" placeholder="Prix de vente sur le site" value="{% if app.session.get('deposit').price is defined %}{{ app.session.get('deposit').price }}{% endif %}">
                </div>
              </div>
              <div class="col-sm-6">
                <div class="form-group">
                  <label>
                    Prix du produit neuf
                    <i class="fa fa-info-circle" data-toggle="tooltip" data-placement="right"
                       title="Indiquez le prix d'origine du produit si vous le connaissez"></i>
                  </label>
                  <input type="number" name="original_price" class="form-control" min="1" placeholder="Indiquez le prix d'achat" value="{% if app.session.get('deposit').original_price is defined %}{{ app.session.get('deposit').original_price }}{% endif %}">
                </div>
              </div>
            </div>

            <div class="text-center">
              <label>
                Montant reversé une fois votre produit vendu
                <i class="fa fa-info-circle" data-toggle="tooltip" data-placement="right"
                   title="{{ siteName }} prend une commission de {{ fee_rate }}% sur le prix de vente du produit"></i>
              </label>
              <div class="valued-amount" data-fee="{{ fixed_fee }}" data-rate="{{ fee_rate }}">0,00 €</div>

              <div class="checkbox">
                <label>
                  <input type="checkbox" name="allow_offer" value="1" {% if app.session.get('deposit').allow_offer is not defined or (app.session.get('deposit').allow_offer is defined and app.session.get('deposit').allow_offer == '1') %}checked{% endif %}> J'accepte la négociation du prix de l'article
                </label>
              </div>
            </div>

            <div class="text-center">
              <input type="submit" class="btn btn-default" value="Etape suivante" />
            </div>
          </form>
        </div><!-- col -->
      </div><!-- .row -->

    </div><!-- .main -->
  </div><!-- .container -->
</div><!-- .main-wrapper -->

{% endblock %}
